<!DOCTYPE html>
<html>
<head>
<title>VueJs Developer Test</title>
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
</head>
<body>

<h1>VueJs Developer Test</h1>

<div id="app">
  <div class="song" v-for="nowplaying in nowplaying_arr" :class="nowplaying.status">
    <span class="song-title">
      {{nowplaying.artist}} - {{nowplaying.title}}
      <br>
      ({{nowplaying.duration}})
    </span>
    <a class="link" :class="nowplaying.status" :href="nowplaying.iTunesTrackUrl" target="_blank">
      <img :src="nowplaying.imageUrl" :alt="nowplaying.artist - nowplaying.title">
    </a>
    <div v-if="nowplaying.status == 'playing'" style="color: #009688">
     &#9658; Now playing
    </div>
    <div v-else>
      &#9209;
      {{handleDate(nowplaying.time)}}
    </div>
  </div>
</div>


<script>
   const app = Vue.createApp({
    data() {
      return {
        nowplaying_arr: []
      }
    },
    methods: {
      startChecking() {
        setInterval(()=>{
          console.log('------updating------');
          // this.nowplaying_arr = jsn.nowplaying;
          $.getJSON('onair.json', (data)=>{
            this.nowplaying_arr = data.nowplaying
          })
        }, 2000);
      },
      handleDate(date_str) {
        let locTime = new Date(date_str)
        return locTime.toLocaleTimeString()
      }
    },
    mounted() {
      console.log('mounted');
      this.startChecking();
      let self = this;
      // $.getJSON('onair.json', (data)=>{
      //   self.nowplaying_arr = data.nowplaying
      // })
      self.nowplaying_arr = jsn.nowplaying
    }
})

    let jsn =
    {
   "nowplaying": [
       {
           "artist": "Robbie Williams",
           "duration": "00:03:19",
           "iTunesTrackUrl": "https://itunes.apple.com/gb/album/candy/id565997914?i=565997918&uo=4",
           "imageUrl": "http://is4.mzstatic.com/image/thumb/Music/v4/90/9d/16/909d16ba-4470-b824-ee3b-41ab25546e81/source/450x450bb.jpg",
           "previewUrl": "",
           "status": "playing",
           "time": "2022-12-26T17:24:32Z",
           "title": "Candy"
       },
       {
           "artist": "Jamiroquai",
           "duration": "00:03:18",
           "iTunesTrackUrl": "https://itunes.apple.com/gb/album/canned-heat/id217052057?i=217052141&uo=4",
           "imageUrl": "http://is4.mzstatic.com/image/thumb/Music/v4/7b/84/3d/7b843d96-5b8f-ecbb-f2fd-ce3a4261dc7b/source/450x450bb.jpg",
           "previewUrl": "",
           "status": "history",
           "time": "2022-12-26T17:21:07Z",
           "title": "Canned Heat"
       },
       {
           "artist": "Justin Bieber",
           "duration": "00:03:22",
           "iTunesTrackUrl": "https://itunes.apple.com/gb/album/what-do-you-mean/id1049359399?i=1049359404&uo=4",
           "imageUrl": "http://is3.mzstatic.com/image/thumb/Music69/v4/e2/aa/01/e2aa018a-7c57-f15c-c1ff-b8cf979344f5/source/450x450bb.jpg",
           "previewUrl": "",
           "status": "history",
           "time": "2022-12-26T17:17:43Z",
           "title": "What Do You Mean"
       },
       {
           "artist": "Amy Macdonald",
           "duration": "00:03:33",
           "iTunesTrackUrl": "https://itunes.apple.com/gb/album/mr-rock-roll/id260315342?i=260315344&uo=4",
           "imageUrl": "http://is3.mzstatic.com/image/thumb/Music/v4/f1/b4/00/f1b400a4-af04-5b9c-f8c4-9293ab0ff554/source/450x450bb.jpg",
           "previewUrl": "",
           "status": "history",
           "time": "2022-12-26T17:12:02Z",
           "title": "Mr Rock & Roll"
       },
       {
           "artist": "Beyonce",
           "duration": "00:04:27",
           "iTunesTrackUrl": "https://itunes.apple.com/gb/album/love-on-top/id626204707?i=626205216&uo=4",
           "imageUrl": "http://is1.mzstatic.com/image/thumb/Music/v4/96/b5/28/96b5280d-379c-af56-a0f5-1825b7a411b4/source/450x450bb.jpg",
           "previewUrl": "",
           "status": "history",
           "time": "2022-12-26T17:07:37Z",
           "title": "Love on Top"
       },
       {
           "artist": "Calvin Harris & Disciples",
           "duration": "00:03:28",
           "iTunesTrackUrl": "https://itunes.apple.com/gb/album/how-deep-is-your-love/id1001677304?i=1001677305&uo=4",
           "imageUrl": "http://is2.mzstatic.com/image/thumb/Music7/v4/77/03/5d/77035dba-febd-f8db-5641-219ba45881d6/source/450x450bb.jpg",
           "previewUrl": "",
           "status": "history",
           "time": "2022-12-26T17:04:10Z",
           "title": "How Deep Is Your Love"
       },
       {
           "artist": "Meghan Trainor",
           "duration": "00:02:14",
           "iTunesTrackUrl": "https://music.apple.com/gb/album/made-you-look/1630437323?i=1630437329&uo=4",
           "imageUrl": "https://is2-ssl.mzstatic.com/image/thumb/Music112/v4/e2/b6/c9/e2b6c962-e585-85c5-841b-64c01aa35834/196589214188.jpg/450x450bb.jpg",
           "previewUrl": "",
           "status": "history",
           "time": "2022-12-26T17:01:54Z",
           "title": "Made You Look"
       },
       {
           "artist": "Rita Ora",
           "duration": "00:03:10",
           "iTunesTrackUrl": "https://itunes.apple.com/gb/album/let-you-love-me/1436290232?i=1436290337&uo=4",
           "imageUrl": "https://is2-ssl.mzstatic.com/image/thumb/Music118/v4/97/5a/9a/975a9aaf-d087-2ccf-73c7-f305a698e270/source/450x450bb.jpg",
           "previewUrl": "",
           "status": "history",
           "time": "2022-12-26T16:58:47Z",
           "title": "Let You Love Me"
       },
       {
           "artist": "The Chainsmokers",
           "duration": "00:04:06",
           "iTunesTrackUrl": "https://music.apple.com/gb/album/something-just-like-this-tokyo-remix/1245878924?i=1245878927&uo=4",
           "imageUrl": "https://is2-ssl.mzstatic.com/image/thumb/Music127/v4/ed/a6/a8/eda6a8a5-daef-046e-3b33-cc23db06cb26/886446563534.jpg/450x450bb.jpg",
           "previewUrl": "",
           "status": "history",
           "time": "2022-12-26T16:52:55Z",
           "title": "Something Just Like This (Feat. Coldplay)"
       },
       {
           "artist": "Jess Glynne",
           "duration": "00:03:47",
           "iTunesTrackUrl": "https://itunes.apple.com/gb/album/hold-my-hand/id993230070?i=993230258&uo=4",
           "imageUrl": "http://is1.mzstatic.com/image/thumb/Music6/v4/b9/93/5f/b9935fcd-7e71-9505-3a70-6191e3c6c87f/source/450x450bb.jpg",
           "previewUrl": "",
           "status": "history",
           "time": "2022-12-26T16:49:10Z",
           "title": "Hold My Hand"
       },
       {
           "artist": "Pink",
           "duration": "00:03:50",
           "iTunesTrackUrl": "https://music.apple.com/gb/album/never-gonna-not-dance-again/1652355816?i=1652356188&uo=4",
           "imageUrl": "https://is1-ssl.mzstatic.com/image/thumb/Music112/v4/b8/75/9b/b8759beb-145e-8f2f-8481-9fd1aaaa49ab/196589426598.jpg/450x450bb.jpg",
           "previewUrl": "",
           "status": "history",
           "time": "2022-12-26T16:45:13Z",
           "title": "Never Gonna Not Dance Again"
       },
       {
           "artist": "Livin Joy",
           "duration": "00:03:35",
           "iTunesTrackUrl": "https://music.apple.com/gb/album/dont-stop-movin/1361726459?i=1361728000&uo=4",
           "imageUrl": "https://is4-ssl.mzstatic.com/image/thumb/Music62/v4/fb/59/8b/fb598b2e-3f9c-d656-3b7d-e0ca9a74b539/885012025094.jpg/450x450bb.jpg",
           "previewUrl": "",
           "status": "history",
           "time": "2022-12-26T16:41:40Z",
           "title": "Don't Stop Moving"
       },
       {
           "artist": "Walk the Moon",
           "duration": "00:03:16",
           "iTunesTrackUrl": "https://itunes.apple.com/gb/album/shut-up-and-dance/id915448845?i=915448860&uo=4",
           "imageUrl": "http://is4.mzstatic.com/image/thumb/Music5/v4/bc/0c/ea/bc0cea20-d0ce-c5b5-a081-d5af3e39af72/source/450x450bb.jpg",
           "previewUrl": "",
           "status": "history",
           "time": "2022-12-26T16:38:22Z",
           "title": "Shut Up and Dance"
       },
       {
           "artist": "Macklemore",
           "duration": "00:03:08",
           "iTunesTrackUrl": "https://itunes.apple.com/gb/album/cant-hold-us-feat-ray-dalton/id560097651?i=560097694&uo=4",
           "imageUrl": "http://is4.mzstatic.com/image/thumb/Music/v4/34/7d/75/347d759e-0ac7-ee1c-1cad-a71dd783b838/source/450x450bb.jpg",
           "previewUrl": "",
           "status": "history",
           "time": "2022-12-26T16:33:23Z",
           "title": "Can't Hold Us"
       },
       {
           "artist": "Rihanna",
           "duration": "00:03:56",
           "iTunesTrackUrl": "https://itunes.apple.com/gb/album/only-girl-in-the-world/id458304705?i=458304723&uo=4",
           "imageUrl": "http://is1.mzstatic.com/image/thumb/Music/v4/d5/6d/8f/d56d8f6e-a797-707e-5475-29ae782bce60/source/450x450bb.jpg",
           "previewUrl": "",
           "status": "history",
           "time": "2022-12-26T16:29:28Z",
           "title": "Only Girl (In the World)"
       },
       {
           "artist": "Shawn Mendes",
           "duration": "00:03:29",
           "iTunesTrackUrl": "https://itunes.apple.com/gb/album/in-my-blood/1359906692?i=1359907549&uo=4",
           "imageUrl": "http://is2.mzstatic.com/image/thumb/Music128/v4/6c/f6/37/6cf637f4-cb77-660e-a94d-642304f22611/source/450x450bb.jpg",
           "previewUrl": "",
           "status": "history",
           "time": "2022-12-26T16:26:01Z",
           "title": "In My Blood"
       },
       {
           "artist": "Tlc",
           "duration": "00:03:39",
           "iTunesTrackUrl": "https://itunes.apple.com/gb/album/no-scrubs/id298575243?i=298575248&uo=4",
           "imageUrl": "http://is5.mzstatic.com/image/thumb/Music1/v4/89/63/42/89634250-eed4-a474-cf18-8b55cab575da/source/450x450bb.jpg",
           "previewUrl": "",
           "status": "history",
           "time": "2022-12-26T16:22:05Z",
           "title": "No Scrubs"
       },
       {
           "artist": "Dua Lipa",
           "duration": "00:03:23",
           "iTunesTrackUrl": "https://music.apple.com/gb/album/levitating-feat-dababy/1532788351?i=1532788352&uo=4",
           "imageUrl": "https://is4-ssl.mzstatic.com/image/thumb/Music125/v4/c9/58/ee/c958ee95-32b0-e006-52a9-f5db8d04560c/190295132651.jpg/450x450bb.jpg",
           "previewUrl": "",
           "status": "history",
           "time": "2022-12-26T16:18:40Z",
           "title": "Levitating"
       },
       {
           "artist": "Calvin Harris",
           "duration": "00:03:24",
           "iTunesTrackUrl": "https://itunes.apple.com/gb/album/feel-so-close-radio-edit/id561066537?i=561066670&uo=4",
           "imageUrl": "http://is3.mzstatic.com/image/thumb/Music/v4/88/42/09/88420932-f817-4b4e-4b56-775f35926668/source/450x450bb.jpg",
           "previewUrl": "",
           "status": "history",
           "time": "2022-12-26T16:13:44Z",
           "title": "Feel So Close"
       },
       {
           "artist": "Bastille",
           "duration": "00:03:34",
           "iTunesTrackUrl": "https://itunes.apple.com/gb/album/of-the-night/id719633345?i=719633362&uo=4",
           "imageUrl": "http://is3.mzstatic.com/image/thumb/Music4/v4/82/92/ce/8292ceba-3c8b-03a3-c9f5-2b93d2302d3b/source/450x450bb.jpg",
           "previewUrl": "",
           "status": "history",
           "time": "2022-12-26T16:10:08Z",
           "title": "Of the Night"
       },
       {
           "artist": "The Saturdays",
           "duration": "00:03:12",
           "iTunesTrackUrl": "https://music.apple.com/gb/album/all-fired-up/1442543198?i=1442543421&uo=4",
           "imageUrl": "https://is3-ssl.mzstatic.com/image/thumb/Music114/v4/0d/25/f3/0d25f303-4724-5dff-bbfb-8e0b8394f5f1/14UMGIM24429.rgb.jpg/450x450bb.jpg",
           "previewUrl": "",
           "status": "history",
           "time": "2022-12-26T16:06:53Z",
           "title": "All Fired Up"
       },
       {
           "artist": "Sigala, Gabry Ponte, Alex Gaudino",
           "duration": "00:03:00",
           "iTunesTrackUrl": "https://music.apple.com/gb/album/rely-on-me/1649960984?i=1649961467&uo=4",
           "imageUrl": "https://is2-ssl.mzstatic.com/image/thumb/Music122/v4/f1/a0/21/f1a0210c-5acc-76d7-253f-90d957e8c75e/196589498632.jpg/450x450bb.jpg",
           "previewUrl": "",
           "status": "history",
           "time": "2022-12-26T16:03:32Z",
           "title": "Rely on Me"
       },
       {
           "artist": "Little Mix",
           "duration": "00:03:42",
           "iTunesTrackUrl": "https://itunes.apple.com/gb/album/move/id703386073?i=703386139&uo=4",
           "imageUrl": "http://is3.mzstatic.com/image/thumb/Music4/v4/a7/01/b2/a701b228-7d87-11e7-4293-3a3cef5d90b9/source/450x450bb.jpg",
           "previewUrl": "",
           "status": "history",
           "time": "2022-12-26T15:59:49Z",
           "title": "Move"
       },
       {
           "artist": "Pink",
           "duration": "00:03:57",
           "iTunesTrackUrl": "https://itunes.apple.com/gb/album/what-about-us/id1269195363?i=1269195364&uo=4",
           "imageUrl": "http://is3.mzstatic.com/image/thumb/Music118/v4/47/11/d1/4711d1fc-fb76-8e78-21b4-2fba4f3a0c0e/source/450x450bb.jpg",
           "previewUrl": "",
           "status": "history",
           "time": "2022-12-26T15:54:34Z",
           "title": "What About Us"
       },
       {
           "artist": "Eric Prydz",
           "duration": "00:02:40",
           "iTunesTrackUrl": "https://itunes.apple.com/gb/album/pjanoo-radio-edit/id1216951593?i=1216951600&uo=4",
           "imageUrl": "http://is2.mzstatic.com/image/thumb/Music82/v4/76/96/b6/7696b6d5-b216-caa9-3414-f9fbbfbb10cf/source/450x450bb.jpg",
           "previewUrl": "",
           "status": "history",
           "time": "2022-12-26T15:51:59Z",
           "title": "Pjanoo"
       }
   ]
}
    const mountedApp = app.mount('#app')
</script>

<style scoped>
  div#app {
    display: flex;
    justify-content: center;
    align-items: flex-start;
    flex-wrap: wrap;
  }
  .song {
    width: 200px;
    margin: 10px;
    border: 2px solid orange;
    text-align: center;
    height: 236px;
    border-radius: 7px;
  }
  .song.playing {
    border-color: aqua;
  }
  .song .song-title {
    overflow: hidden;
    white-space: nowrap;
    display: block;
    height: 40px;
    text-overflow: ellipsis;
    padding: 5px;
  }
  .song .link img{
    height: 140px
  }
</style>

</body>
</html>
